<!--ヘッダー・ナビ-->
<!doctype html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<body th:fragment="header">
  <header class="bm-header">
    <div class="bm-container bm-header__inner">
      <a class="bm-logo" th:href="@{/items}">BaseMarket</a>

      <form class="bm-search" th:action="@{/items}" method="get">
        <input class="bm-input" type="search" name="q" placeholder="商品を検索" th:value="${param.q}" />
        <button class="bm-btn" type="submit">検索</button>
      </form>

      <nav class="bm-nav">
        <a class="bm-nav__link" th:href="@{/items/new}">出品</a>
        <a class="bm-nav__link" th:href="@{/bookmarks}">ブックマーク</a>
        <a class="bm-nav__link" th:href="@{/orders}">購入履歴</a>
        <a class="bm-nav__link" th:href="@{/chat}">チャット</a>
        <a class="bm-nav__link" th:href="@{/ranking}">ランキング</a>

        <!-- 未ログイン -->
        <span th:if="${#authorization.expression('isAnonymous()')}">
          <a class="bm-nav__link" th:href="@{/login}">ログイン</a>
          <a class="bm-nav__link bm-nav__link--primary" th:href="@{/register}">新規登録</a>
        </span>

        <!-- ログイン中 -->
        <span th:if="${#authorization.expression('isAuthenticated()')}">
          <span class="bm-nav__user" th:text="${#authentication.name}">user</span>
          <form class="bm-inline" th:action="@{/logout}" method="post">
            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}">
            <button class="bm-nav__link bm-linklike" type="submit">ログアウト</button>
          </form>
        </span>
      </nav>
    </div>
  </header>
</body>
</html>
